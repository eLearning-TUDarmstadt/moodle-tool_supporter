define(["jquery","core/ajax","core/templates","core/notification","core/str","tool_supporter/load_information"],function(a,b,c,d,e,f){return{toggle_password_input:function(){a("#new_course_enable_self").on("click",function(){a("#new_course_self_password").prop("disabled",!this.checked)})},show_new_course:function(){a("#btn_show_new_course").on("click",function(){a('[data-region="create_new_course_section"]').toggle()})},create_new_course:function(){a("#create_new_course_button").on("click",function(){var c=b.call([{methodname:"tool_supporter_create_new_course",args:{shortname:a("#new_course_short_name_input")[0].value,fullname:a("#new_course_full_name_input")[0].value,visible:a("#new_course_is_visible").is(":checked"),categoryid:a("#new_course_category_input")[0].value,activate_self_enrol:a("#new_course_enable_self").is(":checked"),self_enrol_password:a("#new_course_self_password")[0].value}}]);c[0].done(function(b){var c=f.show_course_detail(b.id,!0);c[0].done(function(b){a('[data-region="create_new_course_section"]').hide(),a("#courseTable").DataTable().row.add({id:b.courseDetails.id,shortname:b.courseDetails.shortname,fullname:b.courseDetails.fullname,level_one:b.courseDetails.level_one,level_two:b.courseDetails.level_two,visible:+b.courseDetails.visible}).draw(!1)})}),c[0].fail(function(b){console.log("There was an error during course creation - response is:"),console.log(b),e.get_string("error","error").done(function(c){e.get_string("ok","moodle").done(function(f){var g=a("#new_course_short_name_input")[0].value;e.get_string("shortnametaken","error",g).done(function(a){var e="Possible problem: "+a+"<br><br>";b.message&&(e+="Error-Message:<br>"+b.message+"<br><br>"),b.debuginfo&&(e+="Debuginfo:<br>"+b.debuginfo+"<br><br>"),d.alert(c,e,f)})})})})})}}});